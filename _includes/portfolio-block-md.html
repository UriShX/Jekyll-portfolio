{% assign side = include.origin | modulo:2 %}
{% if side == 1 %}
    {% assign align-class="portfolio-l" %}
{% else %}
    {% assign align-class="portfolio-r" %}
{% endif %}
{% assign block-data=site.data.portfolio[include.origin] %}
{% assign content=block-data.content %}
{% capture my_include %}
    {% include_relative {{ content }} %}
{% endcapture %}
<div class="portfolio-block {{ align-class }}">
    <div class="portfolio-front" style="background-image: url('{{ block-data.cover }}');"></div>
    <div class="portfolio-overlay"></div>
    <div class="portfolio-excerpt">
        {% if block-data.title %}
            <h3>{{ block-data.title }}</h3>
        {% endif %}
        <p>{{ my_include | truncate: 512 }}</p>
    </div>
    <div class="portflio-links">
        {% if block-data.link %}
            <a data-cssmodal-nohash href="{{ block-data.link }}" target="_blank" rel="noopener noreferrer">
                <i class="material-icons">link</i>
            </a>
        {% endif %}
        {% if block-data.modal %}
            <a href="#modal-gallery-{{ include.origin }}">
                <i class="material-icons">pageview</i>
            </a>
        {% endif %}
    </div>
</div>

<section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-{{ include.origin }}" role="dialog" tabindex="-1">
    <div class="modal-inner">
        <div class="modal-content">
            <div class="spinner">
                <div class="spinner__outer"></div>
                <div class="spinner__inner"></div>
            </div>


            <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

            <ul class="modal--gallery-navigation">
                <li>
                    <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                </li>
                <li>
                    <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                </li>
            </ul>

        </div>
        <div class="modal--gallery-caption"></div>

        <footer>
            <ul aria-hidden="true" class="modal-content-list is-active">
                {% for i in block-data.modal %}

                    <li data-caption="{{ i.text }}">
                        <a href="#modal-gallery-{{ include.origin }}/{% increment var %}">
                            <img alt="{{ i.text }}" data-src-fullsize="{{ i.img }}">
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </footer>
    </div>

    <a class="modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
</section>
