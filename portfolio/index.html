<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8"/>
    <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Portfolio | Uri Sh.</title>
<meta name="generator" content="Jekyll v4.1.0" />
<meta property="og:title" content="Portfolio" />
<meta name="author" content="Uri Shani" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is a short portfolio of significant works I have done over the past few years. Clicking on the tiles will open a popup with more details about the work. Some of the tiles also have a link to code samples, 3D designs, or other relevant materials." />
<meta property="og:description" content="This is a short portfolio of significant works I have done over the past few years. Clicking on the tiles will open a popup with more details about the work. Some of the tiles also have a link to code samples, 3D designs, or other relevant materials." />
<link rel="canonical" href="https://urishx.github.io/Jekyll-portfolio/portfolio/" />
<meta property="og:url" content="https://urishx.github.io/Jekyll-portfolio/portfolio/" />
<meta property="og:site_name" content="Uri Sh." />
<script type="application/ld+json">
{"description":"This is a short portfolio of significant works I have done over the past few years. Clicking on the tiles will open a popup with more details about the work. Some of the tiles also have a link to code samples, 3D designs, or other relevant materials.","headline":"Portfolio","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://urishx.github.io/Jekyll-portfolio/logo.png"},"name":"Uri Shani"},"url":"https://urishx.github.io/Jekyll-portfolio/portfolio/","author":{"@type":"Person","name":"Uri Shani"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href="https://fonts.googleapis.com/css2?family=Alef&family=Tinos&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link rel="icon" href="/Jekyll-portfolio/assets/cropped-logo-1-32x32.png" sizes="32x32"/>
    <link rel="stylesheet" href="/Jekyll-portfolio/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://urishx.github.io/Jekyll-portfolio/feed.xml" title="Uri Sh." />
</head>
<body><div>
    <header class="site-header" style="background-image: url('/Jekyll-portfolio/assets/img/banner.png');">
        <div class="banner">
            <div class="img-container">
                
                    <img alt="logo" src="/Jekyll-portfolio/assets/img/logo.png"/>
                
            </div>
            <h1 class="site-title">
                <a rel="author" href="/Jekyll-portfolio/">Uri Sh.</a>
            </h1>
            <h2>Making and Engineering</h2>
        </div>
        <div class="wrapper"><nav class="site-nav">
                    <input class="nav-trigger" id="nav-trigger" type="checkbox"/>
                    <label for="nav-trigger">
                        <span class="menu-icon">
                            <svg height="15px" viewbox="0 0 18 15" width="18px">
                                <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
                            </svg>
                        </span>
                    </label>

                    <div class="trigger">
                        <a class="page-link" href="/Jekyll-portfolio/" >Home</a><a class="page-link" href="/Jekyll-portfolio/about/" >About me</a><a class="page-current" href="/Jekyll-portfolio/portfolio/"  aria-disabled="true" >Portfolio</a></div>
                </nav></div>
    </header>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        



<div class="portfolio">
    <header class="post-header">
        <h1 class="post-title">Portfolio</h1>
    </header>
    <div class="post-content">
        <p>This is a short portfolio of significant works I have done over the past few years. Clicking on the tiles will open a popup with more details about the work. Some of the tiles also have a link to code samples, 3D designs, or other relevant materials.</p>

<p>Please contact me for further details about any of the projects listed below. You can also find me on  <a href="https://www.facebook.com/uri.sh.982">Facebook</a>, Twitter (<a href="https://twitter.com/UriShX">@UriShX</a>), and on <a href="https://hackaday.io/UriSh">Hackcady.io</a>.</p>

<p>The Github repo for this portfolio is: <a href="https://github.com/UriShX/Jekyll-portfolio">github.com/UriShX/Jekyll-portfolio</a>. A markdown portfolio that was the basis for starting this project lives <a href="https://github.com/UriShX/portfolio">here</a>.</p>

    </div>

    <div class="portfolio-tags">
        <a href="#portfolio-all-tags">All</a>
        
            <a href="#mechanical">mechanical</a>
        
            <a href="#design">design</a>
        
            <a href="#control">control</a>
        
            <a href="#prototype">prototype</a>
        
            <a href="#model">model</a>
        
            <a href="#plastics-engineering">plastics-engineering</a>
        
            <a href="#cad">cad</a>
        
            <a href="#cae">cae</a>
        
            <a href="#injection-molding">injection-molding</a>
        
            <a href="#iot">iot</a>
        
            <a href="#elastomer">elastomer</a>
        
            <a href="#arduino">arduino</a>
        
            <a href="#video">video</a>
        
            <a href="#raspberry-pi">raspberry-pi</a>
        
    </div>
    
    <div class="portfolio-wrapper">
        
            
            
            
            
            <div class="portfolio-block portfolio-l mechanical design control" id="portfolio-block-1">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/wheel-right.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Perpetuum Mobile, Shachar Marcus, MUZA, 2019</h3>
                    
                    <p>
                        
                        Mechanical design, characterization and selection of drive mechanism / motor, production of shop drawings, supervision on construction. Produced in collaboration with studio Omri Ben Artzi, as an installation in the exhibition “Data Mining”, Shachar Marcus, MUZA, 2019.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-1">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-1" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-1/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/wheel-front-1.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-1/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/concept-omri.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-1/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/ezgif.com-optimize-4.gif">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-1/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/wheel-right.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-1/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/perpetuum-mobile/IMG_20190925_090039.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r prototype model control" id="portfolio-block-2">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/niti-light/11894545_10207114581966072_1589272026712605774_o_10207114581966072.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>NiTi light</h3>
                    
                    <p>
                        
                        Realization of a product design, POC for a graduation project exhibition. Nitinol heated stems for paper flowers, lit by LEDs, in a faux vase. Animation of the flowers by resistively heating the NiTi wires and PWM control of the LEDs brightness. Design by my wife, Aya Shani, as grduation project in product design at H.I.T..

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-2">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-2" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/11889954_10207114596406433_2522463985584899658_o_10207114596406433.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/ezgif.com-gif-maker.gif">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/IMG-20191127-WA0010-300x200.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/11894545_10207114581966072_1589272026712605774_o_10207114581966072.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/11892031_10207087731214820_1210169129953186247_n_10207087731214820.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/6">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/11907193_10207087731894837_8767404311496339564_n_10207087731894837.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/7">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/ezgif.com-optimize-1.gif">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-2/8">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/niti-light/11828802_10207063626132208_3432269483034708133_n_10207063626132208.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l plastics-engineering cad cae injection-molding" id="portfolio-block-3">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/uav-fuel-tank/IMG-20180328-WA0004.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Design for plastic injection molding: UAV fuel tank.</h3>
                    
                    <p>
                        
                        Material selection, redesign of costumer’s basic design concept, inc. mechanical and Moldflow  FAE, mold design approval and parts approval.
Salaried work for Supergum, as principal design engineer, for security sector costumer.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-3">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-3" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-3/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/uav-fuel-tank/fuel-tank-cad-iso.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-3/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/uav-fuel-tank/fuel-tank-cad-bot.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-3/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/uav-fuel-tank/fuel-tank-bottom-heat.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-3/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/uav-fuel-tank/IMG-20180328-WA0004.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r design prototype model" id="portfolio-block-4">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191211_140908.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Toy sound box prototype</h3>
                    
                    <p>
                        
                        A working model prototype for usability testing of a sound box in a plush toy which is under development.
Usability tested for sound box size, operation and ease of use, and loudness.
Contract work.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-4">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-4" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/sound_box_proto_281119a_bb-1024x523.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191209_141424.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191211_100130.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191211_140908.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191211_141814.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-4/6">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/toy-sound-box-prototype/IMG_20191211_141828.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l mechanical control" id="portfolio-block-5">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/IMG_20190925_083954-1024x768.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Mechanical Sieve - Shachar Marcus, MUZA, 2019</h3>
                    
                    <p>
                        
                        Mechanical and electrical design, along with programming. Creating a working installation from the artist’s concept. Construction in collaboration with Studio Omri Ben Artzi, for the exhibition “Data Mining”, Shachar Marcus, MUZA, 2019.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-5">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-5" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-5/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/Screenshot_20191003-094618-485x1024.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-5/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/IMG_20190918_132954-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-5/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/ezgif.com-optimize-2.gif">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-5/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/IMG_20190925_083954-1024x768.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-5/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/mechanical-sieve/IMG_20190925_090019-768x1019.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r plastics-engineering injection-molding" id="portfolio-block-6">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/fuel-gun/4-1024x768.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Injection molding - mold approval</h3>
                    
                    <p>
                        
                        Approval of molded products produced by “Supergum” as contracted work.
Parts were approved according to customer’s requirements, and were collaboratively designed with a leading design studio.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-6">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-6" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-6/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/fuel-gun/3-1024x768.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-6/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/fuel-gun/2-1024x768.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-6/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/fuel-gun/1-1024x768.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-6/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/fuel-gun/4-1024x768.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l iot prototype model" id="portfolio-block-7">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/smart-scale/IMG_20190429_161110.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Smart kitchen scale for bread dough</h3>
                    
                    <p>
                        
                        An ESP32 based kitchen scale for bread baking. Connects to Google sheets over WiFi to retrieve bread formulas, and to save measured weight of ingredients.
BLE serves to define WiFi, as well as display current measurement.
Calculates baker’s percentage on the fly.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://hackaday.io/project/164849-yet-another-smart-kitchen-scale" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-7">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-7" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-7/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/smart-scale/IMG_20190429_161110.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-7/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/smart-scale/IMG_20190429_160952_cropped.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-7/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/smart-scale/ESP32_weight_scale_bb.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r plastics-engineering cad cae injection-molding" id="portfolio-block-8">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/concrete-pot/concrete-pot-deformation-in-1024x531.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Feasibility study: Concrete pot</h3>
                    
                    <p>
                        
                        Mechanical FEA of plastic injection molded concrete pouring pot, first step in approval for customer’s design.
Salaried work for “Supergum”, for a customer manufacturing land stabilizing solutions.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-8">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-8" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-8/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/concrete-pot/concrete-pot-whole-768x444.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-8/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/concrete-pot/concrete-pot-strain-out-1024x531.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-8/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/concrete-pot/concrete-pot-loads-and-fixtures.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-8/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/concrete-pot/concrete-pot-deformation-in-1024x531.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l plastics-engineering cad elastomer" id="portfolio-block-9">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/elastomeric-part-design/rotating-boot-cover-768x576.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Elastomeric part design</h3>
                    
                    <p>
                        
                        As part of my salaried work for Supergum, I was involved in design and design for manufacture of multiple elastomer parts.
As part of my work there I was involved in elastomeric material selection, advising customers on design decisions, and fitting processes and technologies for particular products.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-9">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-9" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-9/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/elastomeric-part-design/Lens-bumper-PU-768x576.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-9/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/elastomeric-part-design/flat-cut-seal-with-space-for-vulcanized-connection-768x576.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-9/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/elastomeric-part-design/rotating-boot-cover-768x576.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r plastics-engineering elastomer injection-molding cad mechanical" id="portfolio-block-10">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/aerial-warning-ball/warning-ball-test-768x432.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Design for plastic injection molding: UAV fuel tank.</h3>
                    
                    <p>
                        
                        Design change in a flagship product, fueled by failure analysis. Lead engineer, salaried work for “Supergum”.
Mold and material change for high current aerial warning marker, after appearing to be part of a point failure. A comprehensive failure analysis, and mechanical testing of the new design lead to verified changes.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-10">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-10" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-10/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/aerial-warning-ball/warning-ball-test-768x432.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-10/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/aerial-warning-ball/warning-ball-change-drawing-768x406.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-10/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/aerial-warning-ball/1182_f11269c96d3b4fcf65e73279e52cef6b.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-10/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/aerial-warning-ball/warning-ball-lips-closed-768x490.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l cae design model" id="portfolio-block-11">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/ziv-foot-rest/2nd_iteration_rounded_handle_vonMises-768x432.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Static forces analysis for heat formed foot-rest</h3>
                    
                    <p>
                        
                        Stress and strain validation of a heat formed foot-rest concept. Design by Ziv Mishan, for his graduation project in product design at H.I.T.. Characterization of applied forces, appropriate model, and several iterations based on slight changes in geometry, based on client’s original design file. A report was produced to convey suggested changes in design.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-11">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-11" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-11/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ziv-foot-rest/2nd_iteration_rounded_handle_vonMises-768x432.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-11/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ziv-foot-rest/1st_iteration_displacement-768x432.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-11/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ziv-foot-rest/ziv-stool-03-578x1024.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-11/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ziv-foot-rest/ziv-stool-01-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r cad design" id="portfolio-block-12">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/SHF_for_print-768x540.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Parametric design for 3D printing</h3>
                    
                    <p>
                        
                        Various 3D printed adapters, replacements, and fixes.
Designed in OpenSCAD.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://www.thingiverse.com/UriShX/designs" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-12">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-12" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/SHF_for_print-768x540.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0804-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/AC_hose_adaptor-768x507.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0780-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0783-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/6">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0781-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/7">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/tertial-doghole-adapter-768x540.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/8">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0805-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-12/9">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/parametric-design-openscad/IMG_0800-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l iot control" id="portfolio-block-13">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/web-ble-basic-control/ble_slider_web_app_2.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Web-BLE control app + esp32 sketches</h3>
                    
                    <p>
                        
                        A web-ble responsive web app to demonstrate control over BLE of ESP32 projects. 
Includes links to github repo of web app, and to a couple of ESP32 sketches for testing.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://github.com/UriShX/ESP32_fader" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#stackable-13-1">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                        <section aria-hidden="true" aria-labelledby="stackable-label" class="modal--show" id="stackable-13-1" role="dialog" tabindex="-1">

                            <div class="modal-inner">
                                <header>
                                    <h2 id="stackable-label">Stacked modal</h2>
                                </header>
                                <div class="modal-content">
                                    
                                        
                                        <h1 id="custom-range-slider-wble-write--notify">Custom Range Slider W/BLE Write &amp; Notify</h1>
<h2 id="scope">Scope</h2>
<p>This web app uses <a href="https://developers.google.com/web/updates/2015/07/interact-with-ble-devices-on-the-web">web-ble</a> to control a esp32 device over ble, while subscribing to its’ updates, and includes ‘autoranging’.
App is designed to work with esp32 ble controlled apps, see <a href="https://gist.github.com/UriShX/2b1f1c7b461b466a4b4ae336d52653dd">breathing LED gist</a> and <a href="https://gist.github.com/UriShX/81266ab108876c4ef4252cc9fd3e1432">Hobby servo gist</a>.
App is deployed at https://urishx.github.io/ESP32_fader/.</p>

<h2 id="todo">TODO</h2>
<ul>
  <li>There’s currently no documentation and little to no code remarks in the web app.
    <ul>
      <li>However, The Arduino sketches in the attached Gists are commented pretty well.</li>
    </ul>
  </li>
  <li>There are probably better ways to implement this web-ble web app. It was just a quick test for myself, and as such was not taken too seriously.</li>
  <li>On the UI side, I should probably define several portrait orientation widths, and move the slider accordingly. Right now it is not positioned correctly on all devices.</li>
  <li>On the UX side, I should probably ditch the slider alltogether, and replace it with something that will not cause accidental refreshes.</li>
  <li>I started making this app a PWA, but never quite figured it out completley. It can and should be done.</li>
</ul>

                                    
                                </div>
                                <footer>
                                    <p>
                                        
                                            
                                            
                                                <a class="open-modal" href="#modal-gallery-13" role="button" title="Open gallery modal">Open image gallery</a>
                                            
                                        
                                    </p>
                                </footer>
                            </div>

                            <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">&times;</a>
                        </section>
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-13" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-13/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/web-ble-basic-control/ble_slider_web_app_2.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-13/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/web-ble-basic-control/ble_slider_web_app_1.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r control prototype" id="portfolio-block-14">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0778-768x576.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>AB4MC</h3>
                    
                    <p>
                        
                        A prototyping platform for musicians, based on  Arduino and a graphical programming environment.
An ongoing project, open hardware and software.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://hackaday.io/project/109296-arduino-blocks-for-midi-controllers" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-14">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-14" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/AB4MC-blockly-768x440.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0779-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0777-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0794-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0692_crop-768x434.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-14/6">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/ab4mc/IMG_0778-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l design prototype control" id="portfolio-block-15">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/Name_card-front-768x576.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Cap-sense name card</h3>
                    
                    <p>
                        
                        A touch sensitive PCB name card I designed for myself.
Design of the card was meant as playground in which to play around with PCB art, ATtiny13, and some blinking LEDs, while maintaining a balance between playfulness, usability, and low cost.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://hackaday.io/project/160831-cap-sense-name-card" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-15">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-15" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-15/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/Name_Card_180902.gif">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-15/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/Name_card-front-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-15/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/Name_card-back-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-15/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/NameCard_v0.2_front-1024x565.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-15/5">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/cap-sense-name-card/NameCard_v0.2_back-1024x565.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r plastics-engineering" id="portfolio-block-16">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/sus-comp-agriwaste/dual-extruder-straw.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Sustainable composites from agricultural waste</h3>
                    
                    <p>
                        
                        Scientific article, published in “Polymer Composites”. Based on my plastics engineering graduation project at Shenkar College for engineering and Design.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/pc.24472" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-16">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-16" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-16/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/sus-comp-agriwaste/Poster-straw-pp-composites-768x1097.png">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-16/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/sus-comp-agriwaste/filtration.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-16/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/sus-comp-agriwaste/dual-extruder-straw.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l model" id="portfolio-block-17">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/acoustic-guitar/IMG_0810-768x576.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Acoustic guitar</h3>
                    
                    <p>
                        
                        Hand built acoustic guitar. Designed and built by me during my studies with Paul Doyle at The Irish School of Lutherie. 
Top - Spruce. Back and Sides - Maple. Neck - London Plain.

                    </p>
                </div>
                <div class="portflio-links">
                    
                    
                        
                            <a href="#modal-gallery-17">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                    
                
                    
                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-17" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-17/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/acoustic-guitar/IMG_0809-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-17/2">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/acoustic-guitar/Guitar-head-768x1024.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-17/3">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/acoustic-guitar/Guitar-from-top-649x1024.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-17/4">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/acoustic-guitar/IMG_0810-768x576.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r control arduino" id="portfolio-block-18">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/logo.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>2 DC motors moving in tandem w/ AP for control and monitoring</h3>
                    
                    <p>
                        
                        ESP32 &amp; Roboclaw control for exhibition in museum.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://github.com/UriShX/portfolio/blob/master/Roboclaw_control_over_ESP32_with_AP_for_control/roboclaw_esp32_w_AP_and_config.ino" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#stackable-18-1">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                        <section aria-hidden="true" aria-labelledby="stackable-label" class="modal--show" id="stackable-18-1" role="dialog" tabindex="-1">

                            <div class="modal-inner">
                                <header>
                                    <h2 id="stackable-label">Stacked modal</h2>
                                </header>
                                <div class="modal-content">
                                    
                                        
                                        
<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">                                            <span class="cm">/*
 * A basic 2*DC motors controller based on ESP32 in AP mode for configuration and maintanence
 * Motor controller is Roboclaw, DC motors are DC geared motors w/ encoder.
 * 
 * Used to power a mechanized exhibit in a museum setting.
 *
 * Uri Shani, 09/2019
 *
 * changed sdk config AMPDU_TX and AMPDU_RX from 1 to 0 (disabled) for AP to work
 * based on https://github.com/espressif/arduino-esp32/issues/2382
 * 
 * AP based on https://resources.basicmicro.com/esp8266-advanced-control-of-roboclaw/
 *  
*/</span>


<span class="c1">//Includes required to use Roboclaw library</span>
<span class="cp">#include &lt;RoboClaw.h&gt;
#include &lt;Preferences.h&gt;
#include &lt;WiFi.h&gt;
#include &lt;WiFiClient.h&gt;
#include &lt;WebServer.h&gt;
#include &lt;SPIFFS.h&gt;
#include &lt;FS.h&gt;
</span><span class="c1">// #include "html_file.h"</span>

<span class="c1">//Serial2 pins</span>
<span class="cp">#define RXD2 16
#define TXD2 17
#define M1_HOME 27
#define M2_HOME 14
</span>
<span class="c1">//RoboClaw address</span>
<span class="cp">#define address 0x80
</span>
<span class="c1">//Velocity PID coefficients</span>
<span class="cp">#define Kp 4.1
#define Ki 0.5
#define Kd 0.25
</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">qpps</span> <span class="o">=</span> <span class="mi">6718</span><span class="p">;</span> <span class="c1">//44000</span>

<span class="kt">bool</span> <span class="n">M1_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// false = no fault; true = could not home</span>
<span class="kt">bool</span> <span class="n">M2_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span> <span class="c1">// false = no fault; true = could not home</span>
<span class="kt">int</span> <span class="n">smalldelay</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span> <span class="c1">// value in seconds</span>
<span class="kt">int</span> <span class="n">nSmallCycle</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// zero indexed</span>
<span class="kt">int</span> <span class="n">smallCycleIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// manual (if) loop</span>
<span class="kt">int</span> <span class="n">delayPeriondInSeconds</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// self explainatory</span>
<span class="kt">int</span> <span class="n">nTimesToMove</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// complete cycle movement</span>
<span class="kt">bool</span> <span class="n">enableAutoMovement</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span> <span class="c1">// true = auto mode; false = manual mode</span>
<span class="kt">int</span> <span class="n">speedMultiplier</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// speed = qpps * speedMultiplier</span>
<span class="kt">int</span> <span class="n">accelMultiplier</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="c1">// acceleration = qpps * accelMultiplier</span>
<span class="kt">float</span> <span class="n">decelMultiplier</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// deceleration = qpps * decelMultiplier</span>
<span class="kt">int</span> <span class="n">distance</span> <span class="o">=</span> <span class="mi">120</span><span class="p">;</span> <span class="c1">// distance to move before deceleration begins</span>

<span class="kt">bool</span> <span class="n">homing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">currentTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">smallCycleTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>

<span class="n">Preferences</span> <span class="n">preferences</span><span class="p">;</span>
<span class="n">RoboClaw</span> <span class="nf">roboclaw</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Serial2</span><span class="p">,</span><span class="mi">20000</span><span class="p">);</span>

<span class="c1">// Replace with your network credentials</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">ssid</span>     <span class="o">=</span> <span class="s">"AP_SSID"</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">password</span> <span class="o">=</span> <span class="s">"Password"</span><span class="p">;</span>

<span class="c1">// Set web server port number to 80</span>
<span class="n">WebServer</span> <span class="nf">server</span><span class="p">(</span><span class="mi">80</span><span class="p">);</span>

<span class="k">const</span> <span class="kt">char</span> <span class="n">home_page</span><span class="p">[]</span> <span class="o">=</span> <span class="s">R"=====(
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;script&gt;
  function manualControl() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
 
      }
    };
    xhttp.open("GET", "manualorauto", true);
    xhttp.send();
  }
  function sendCommand(chan,state) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
 
      }
    };
    xhttp.open("GET", "handleMotor?motorChannel="+chan+"&amp;motorState="+state, true);
    xhttp.send();
  }
  function home() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
        document.getElementById("homed").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "homeMotors", true);
    xhttp.send();
  }
  function move() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
        document.getElementById("movement").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "testmovement", true);
    xhttp.send();
  }
  function LoadSavePreferences(action) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
        document.getElementById("preferences").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "loadsavepreferences?loadorsave="+action, true);
    xhttp.send();
  }
  function downloadLog(action) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 &amp;&amp; this.status == 200) {
        document.getElementById("log_status").innerHTML = this.responseText;
      } else if (this.readyState == 4) {
        _OBJECT_URL = URL.createObjectURL(this.response);

    		// Set href as a local object URL
    		document.querySelector('#save-file').setAttribute('href', _OBJECT_URL);
    		
    		// Set name of download
    		document.querySelector('#save-file').setAttribute('download', 'img.jpeg');
      }
    };
    xhttp.open("GET", "handleLogFile?action="+action, true);
    xhttp.send();
  }
  setInterval(function(){
   getManualOrAuto();
  }, 1000);
  setInterval(function(){
   getEnc_1();
  }, 1100);
  setInterval(function(){
   getEnc_2();
  }, 1200);
   setInterval(function(){
   getTemp();
  }, 5000);
   setInterval(function(){
   getVoltage();
  }, 2000);
  function getManualOrAuto() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 &amp;&amp; this.status == 200){
        document.getElementById("manualOrAuto").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET","manualorautostate",true);
    xhttp.send();
  }
  function getEnc_1() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 &amp;&amp; this.status == 200){
        document.getElementById("encoder_1_value").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET","readEncoder_1",true);
    xhttp.send();
  }
  function getEnc_2() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 &amp;&amp; this.status == 200){
        document.getElementById("encoder_2_value").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET","readEncoder_2",true);
    xhttp.send();
  }
  function getTemp() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 &amp;&amp; this.status == 200){
        document.getElementById("temp").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET","readTemp",true);
    xhttp.send();
  }
  function getVoltage() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if(this.readyState == 4 &amp;&amp; this.status == 200){
        document.getElementById("voltage").innerHTML = this.responseText;
      }
    };
    xhttp.open("GET","readVoltage",true);
    xhttp.send();
  }
&lt;/script&gt;
&lt;style&gt;
      .round {
        border-radius: 25px;
        background-color: #cde6f5;
        width: 50%;
        height: 50%;
        margin: 20px;
        padding: 20px;
      }
      .round_big {
        border-radius: 25px;
        background-color: #cdf5f2;
        width: 50%;
        height: 50%;
        margin: 20px;
        padding: 20px;
      }
      h2 {
        color: #707078;
      }
      .button {
        background-color: #87919e;
        display: inline-block;
        border-radius: 10px;
        border: none;
        color: white;
        font-size: 15px;
        padding: 25px;
      }
      span {
        color: #707078;
      }
      p {
        color: #707078;
        font-size: 25px;
      }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Enable manual control&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="manualControl()"&gt;Manual Control&lt;/button&gt;
      &lt;br /&gt;
      &lt;p&gt;Control: &lt;span id="manualOrAuto"&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Home&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="home()"&gt;Home Motors&lt;/button&gt;
        &lt;br /&gt;
        &lt;p&gt;&lt;span id="homed"&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round_big"&gt;
        &lt;h2&gt;Move Motors Manually&lt;/h2&gt;
        &lt;p&gt;Encoder Count: &lt;span id="encoder_1_value"&gt;0&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;Encoder Count: &lt;span id="encoder_2_value"&gt;0&lt;/span&gt;&lt;/p&gt;
        &lt;svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   viewBox="0 0 455.93368 710.97366"
   xml:space="preserve"
   id="svg907"
   version="1.1"&gt;&lt;metadata
     id="metadata913"&gt;&lt;rdf:RDF&gt;&lt;cc:Work
         rdf:about=""&gt;&lt;dc:format&gt;image/svg+xml&lt;/dc:format&gt;&lt;dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /&gt;&lt;dc:title&gt;&lt;/dc:title&gt;&lt;/cc:Work&gt;&lt;/rdf:RDF&gt;&lt;/metadata&gt;&lt;defs
     id="defs911"&gt;&lt;clipPath
       id="clipPath923"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path921"
         d="m 1881,3584 h 5979 v 9167 H 1881 V 3584" /&gt;&lt;/clipPath&gt;&lt;clipPath
       id="clipPath943"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path941"
         d="M 0,0 H 9921 V 14031 H 0 V 0" /&gt;&lt;/clipPath&gt;&lt;clipPath
       id="clipPath973"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path971"
         d="M 0,0 H 9921 V 14031 H 0 V 0" /&gt;&lt;/clipPath&gt;&lt;clipPath
       id="clipPath985"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path983"
         d="M 0,0 H 9921 V 14031 H 0 V 0" /&gt;&lt;/clipPath&gt;&lt;clipPath
       id="clipPath1091"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path1089"
         d="M 0,0 H 9921 V 14031 H 0 V 0" /&gt;&lt;/clipPath&gt;&lt;clipPath
       id="clipPath1103"
       clipPathUnits="userSpaceOnUse"&gt;&lt;path
         id="path1101"
         d="M 0,0 H 9921 V 14031 H 0 V 0" /&gt;&lt;/clipPath&gt;&lt;/defs&gt;&lt;g
     transform="matrix(0.08,0,0,-0.08,-161.66633,1008.88)"
     id="g915"&gt;&lt;g
       id="g917"&gt;&lt;g
         clip-path="url(#clipPath923)"
         id="g919"&gt;&lt;path
           id="path925"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="M 6008,4683 V 8463 H 5890 V 4683 h 118" /&gt;&lt;path
           id="path927"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="m 3764,7872 h 2126 v 118 H 3764 v -118" /&gt;&lt;path
           id="path929"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="m 3646,4683 v 3780 h 118 V 4683 h -118" /&gt;&lt;path
           id="path931"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="m 3764,5156 v 118 H 5890 V 5156 H 3764" /&gt;&lt;path
           id="path933"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="M 2033,3736 H 7708 V 8109 L 2745,12599 H 2033 V 3736" /&gt;&lt;path
           id="path935"
           style="fill:none;stroke:#000000;stroke-width:24;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
           d="M 2035,3738 H 7706 V 8108 L 2744,12597 H 2035 V 3738" /&gt;&lt;/g&gt;&lt;/g&gt;&lt;g
       transform="translate(128.34075,35.694545)"
       onclick="sendCommand('1','2')"
       id="M1_R"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;path
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="path1280"
         d="m 6951.5,-8013.4106 -314.5576,181.6099 -314.5576,181.6099 0,-363.2199 0,-363.2198 314.5576,181.6099 z"
         transform="matrix(0.47517734,0,0,-0.5086381,3514.4504,3803.6304)" /&gt;&lt;/g&gt;&lt;g
       onclick="sendCommand('1','1')"
       id="M1_L"
       transform="rotate(179.77952,4806.6309,7889.47)"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278-6"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;path
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="path1280-7"
         d="m 6951.5,-8013.4106 -314.5576,181.6099 -314.5576,181.6099 0,-363.2199 0,-363.2198 314.5576,181.6099 z"
         transform="matrix(0.47517734,0,0,-0.5086381,3514.4504,3803.6304)" /&gt;&lt;/g&gt;&lt;g
       onclick="sendCommand('2','2')"
       id="M2_R"
       transform="translate(128.34075,-2678.555)"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278-3"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;path
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="path1280-5"
         d="m 6951.5,-8013.4106 -314.5576,181.6099 -314.5576,181.6099 0,-363.2199 0,-363.2198 314.5576,181.6099 z"
         transform="matrix(0.47517734,0,0,-0.5086381,3514.4504,3803.6304)" /&gt;&lt;/g&gt;&lt;g
       onclick="sendCommand('2','1')"
       id="M2_L"
       transform="rotate(179.77952,4809.2435,6531.644)"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278-6-2"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;path
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="path1280-7-9"
         d="m 6951.5,-8013.4106 -314.5576,181.6099 -314.5576,181.6099 0,-363.2199 0,-363.2198 314.5576,181.6099 z"
         transform="matrix(0.47517734,0,0,-0.5086381,3514.4504,3803.6304)" /&gt;&lt;/g&gt;&lt;g
       onclick="sendCommand('1','0')"
       id="M1_stop"
       transform="translate(-1779.8534,35.694545)"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278-2"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;rect
         ry="7.0754719"
         rx="67.826851"
         transform="scale(1,-1)"
         y="-8008.6748"
         x="6498.9888"
         height="267.70865"
         width="303.40311"
         id="rect5080"
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:14.1020689;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /&gt;&lt;/g&gt;&lt;g
       onclick="sendCommand('2','0')"
       id="M2_stop"
       transform="translate(-1779.8534,-2678.555)"&gt;&lt;rect
         style="opacity:1;fill:#63f15c;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
         id="rect1278-2-3"
         width="580.51562"
         height="504.7962"
         x="6360.4321"
         y="-8127.2183"
         transform="scale(1,-1)"
         rx="107.73063"
         ry="125" /&gt;&lt;rect
         ry="7.0754719"
         rx="67.826851"
         transform="scale(1,-1)"
         y="-8008.6748"
         x="6498.9888"
         height="267.70865"
         width="303.40311"
         id="rect5080-6"
         style="opacity:1;fill:#ff0000;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:14.1020689;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" /&gt;&lt;/g&gt;&lt;rect
       ry="125"
       rx="125"
       transform="scale(1,-1)"
       y="-8841.9111"
       x="2383.1101"
       height="1463.9089"
       width="4997.4824"
       id="rect5141"
       style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#807171;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:70.86614175, 23.62204725;stroke-dashoffset:0;stroke-opacity:1" /&gt;&lt;text
       transform="scale(1,-1)"
       id="text5145"
       y="-8390.8818"
       x="4608.6787"
       style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:500px;line-height:1.25;font-family:'Courier 10 Pitch';-inkscape-font-specification:'Courier 10 Pitch';letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:12.5"
       xml:space="preserve"&gt;&lt;tspan
         style="stroke-width:12.5"
         y="-8390.8818"
         x="4608.6787"
         id="tspan5143"&gt;M1&lt;/tspan&gt;&lt;/text&gt;
&lt;rect
       transform="scale(1,-1)"
       ry="125"
       rx="125"
       y="-6115.5767"
       x="2404.4172"
       height="1463.9089"
       width="4997.4824"
       id="rect5141-0"
       style="opacity:1;fill:none;fill-opacity:1;fill-rule:evenodd;stroke:#807171;stroke-width:23.62204742;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:70.86614175, 23.62204725;stroke-dashoffset:0;stroke-opacity:1" /&gt;&lt;text
       transform="scale(1,-1)"
       id="text5145-6"
       y="-5664.5474"
       x="4629.9863"
       style="font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:500px;line-height:1.25;font-family:'Courier 10 Pitch';-inkscape-font-specification:'Courier 10 Pitch';letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;stroke-width:12.5"
       xml:space="preserve"&gt;&lt;tspan
         style="stroke-width:12.5"
         y="-5664.5474"
         x="4629.9863"
         id="tspan5143-2"&gt;M2&lt;/tspan&gt;&lt;/text&gt;
&lt;/g&gt;&lt;/svg&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Test movement&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="move()"&gt;Test movement&lt;/button&gt;
        &lt;br /&gt;
        &lt;p&gt;&lt;span id="movement"&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Info&lt;/h2&gt;
        &lt;p&gt;Voltage: &lt;span id="voltage"&gt;0&lt;/span&gt;V&lt;/p&gt;
        &lt;p&gt;Temperature: &lt;span id="temp"&gt;0&lt;/span&gt;C&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Motor Channel 1&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="sendCommand('1','2')"&gt;Move to wall&lt;/button&gt;
      &lt;button type="button" class="button" onclick="sendCommand('1','1')"&gt;Move away from wall&lt;/button&gt;
        &lt;button type="button" class="button" onclick="sendCommand('1','0')"&gt;Motor Off&lt;/button&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;p&gt;Encoder Count: &lt;span id="encoder_1_value"&gt;0&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Motor Channel 2&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="sendCommand('2','2')"&gt;Move to wall&lt;/button&gt;
      &lt;button type="button" class="button" onclick="sendCommand('2','1')"&gt;Move away from wall&lt;/button&gt;
        &lt;button type="button" class="button" onclick="sendCommand('2','0')"&gt;Motor Off&lt;/button&gt;
        &lt;br /&gt;
        &lt;br /&gt;
        &lt;p&gt;Encoder Count: &lt;span id="encoder_2_value"&gt;0&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Save state&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="LoadSavePreferences(2)"&gt;Clear preferences and return to defaults&lt;/button&gt;
      &lt;br /&gt;
      &lt;p&gt;Confirmation: &lt;span id="preferences"&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="round"&gt;
      &lt;h2&gt;Handle log&lt;/h2&gt;
      &lt;button type="button" class="button" onclick="downloadLog(0)"&gt;Download log file&lt;/button&gt;
      &lt;br /&gt;
      &lt;button type="button" class="button" onclick="downloadLog(1)"&gt;Delete log file&lt;/button&gt;
      &lt;br /&gt;
      &lt;p&gt;Confirmation: &lt;span id="log_status"&gt;&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    
&lt;/body&gt;
&lt;/html&gt;
)====="</span><span class="p">;</span>

<span class="c1">// Variable to store the HTTP request</span>
<span class="n">String</span> <span class="n">header</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">movement</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">displayspeed</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">home</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">targetInit</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">handlePreferences</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleHome</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">homeMotors</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleManualOrAuto</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleManualOrAutoState</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleEncoder_1</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleEncoder_2</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleMotor</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleTemp</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleVoltage</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleMovement</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">handleLogFile</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">M1_HOME</span><span class="p">,</span> <span class="n">INPUT_PULLUP</span><span class="p">);</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">M2_HOME</span><span class="p">,</span> <span class="n">INPUT_PULLUP</span><span class="p">);</span>

    <span class="n">preferences</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="s">"roboclaw_defines"</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="n">M1_fault</span> <span class="o">=</span> <span class="n">preferences</span><span class="p">.</span><span class="n">getBool</span><span class="p">(</span><span class="s">"M1_fault"</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="n">M2_fault</span> <span class="o">=</span> <span class="n">preferences</span><span class="p">.</span><span class="n">getBool</span><span class="p">(</span><span class="s">"M2_fault"</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">SPIFFS</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="nb">true</span><span class="p">)){</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"An Error has occurred while mounting SPIFFS"</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>


    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
    <span class="n">roboclaw</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>

    <span class="c1">// Connect to Wi-Fi network with SSID and password, and only one allowed connection</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Setting AP (Access Point)…"</span><span class="p">);</span>
    <span class="n">WiFi</span><span class="p">.</span><span class="n">softAP</span><span class="p">(</span><span class="n">ssid</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="n">IPAddress</span> <span class="n">IP</span> <span class="o">=</span> <span class="n">WiFi</span><span class="p">.</span><span class="n">softAPIP</span><span class="p">();</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"AP IP address: "</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">IP</span><span class="p">);</span>
    
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/"</span><span class="p">,</span> <span class="n">handleHome</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/readEncoder_1"</span><span class="p">,</span> <span class="n">handleEncoder_1</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/readEncoder_2"</span><span class="p">,</span> <span class="n">handleEncoder_2</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/readTemp"</span><span class="p">,</span> <span class="n">handleTemp</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/readVoltage"</span><span class="p">,</span> <span class="n">handleVoltage</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/handleMotor"</span><span class="p">,</span> <span class="n">handleMotor</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/manualorauto"</span><span class="p">,</span> <span class="n">handleManualOrAuto</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/manualorautostate"</span><span class="p">,</span> <span class="n">handleManualOrAutoState</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/homeMotors"</span><span class="p">,</span> <span class="n">homeMotors</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/testmovement"</span><span class="p">,</span><span class="n">handleMovement</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/loadsavepreferences"</span><span class="p">,</span><span class="n">handlePreferences</span><span class="p">);</span>
    <span class="n">server</span><span class="p">.</span><span class="n">on</span><span class="p">(</span><span class="s">"/handleLogFile"</span><span class="p">,</span> <span class="n">handleLogFile</span><span class="p">);</span>

    <span class="n">server</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> 
      
    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

    <span class="n">roboclaw</span><span class="p">.</span><span class="n">ResetEncoders</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>

    <span class="n">home</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="c1">// roboclaw.SetPinFunctions(address, 0, 3, 0); // set pin 4 as voltage clamp</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_fault</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">M2_fault</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">movement</span><span class="p">();</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
      <span class="n">home</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span> <span class="c1">//Choose Serial1 or Serial2 as required</span>
  <span class="n">server</span><span class="p">.</span><span class="n">handleClient</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">millis</span><span class="p">()</span> <span class="o">-</span> <span class="n">currentTime</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">delayPeriondInSeconds</span> <span class="o">-</span> <span class="p">(</span><span class="n">smalldelay</span> <span class="o">*</span> <span class="n">nSmallCycle</span><span class="p">))</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">enableAutoMovement</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">smallCycleIndex</span> <span class="o">&lt;</span> <span class="n">nSmallCycle</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="n">millis</span><span class="p">()</span> <span class="o">-</span> <span class="n">smallCycleTime</span> <span class="o">&gt;</span> <span class="n">smalldelay</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">enableAutoMovement</span><span class="p">)</span>
      <span class="p">{</span>
        <span class="c1">// server.handleClient();</span>
        <span class="n">smallCycleTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
        <span class="n">movement</span><span class="p">();</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
        <span class="n">home</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
        <span class="n">smallCycleIndex</span><span class="o">++</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> 
    <span class="p">{</span>
      <span class="n">smallCycleIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="n">currentTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">movement</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">uint8_t</span> <span class="n">depth1</span><span class="p">,</span><span class="n">depth2</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">qppsM1</span> <span class="o">=</span> <span class="n">qpps</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">qppsM2</span> <span class="o">=</span> <span class="mf">0.98</span> <span class="o">*</span> <span class="n">qpps</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_fault</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">M2_fault</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="c1">// roboclaw.SpeedAccelDistanceM1M2(address, uint32_t accel, uint32_t speed1, uint32_t distance1, uint32_t speed2, uint32_t distance2, uint8_t flag=0);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//distance traveled is v*v/2a = 12000*12000/2*12000 = 6000</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//that makes the total move in ondirection 48000</span>
      <span class="k">do</span><span class="p">{</span>
          <span class="c1">// displayspeed();</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadBuffers</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">depth1</span><span class="p">,</span><span class="n">depth2</span><span class="p">);</span>
      <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">depth1</span><span class="o">!=</span><span class="mh">0x80</span> <span class="o">&amp;&amp;</span> <span class="n">depth2</span><span class="o">!=</span><span class="mh">0x80</span><span class="p">);</span>	<span class="c1">//loop until distance command completes</span>

      <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// roboclaw.SpeedAccelDistanceM1M2(address, uint32_t accel, uint32_t speed1, uint32_t distance1, uint32_t speed2, uint32_t distance2, uint8_t flag=0);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="o">-</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="o">-</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//distance traveled is v*v/2a = 12000*12000/2*12000 = 6000</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>  <span class="c1">//that makes the total move in ondirection 48000</span>
          <span class="k">do</span><span class="p">{</span>
              <span class="c1">// displayspeed();</span>
              <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadBuffers</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">depth1</span><span class="p">,</span><span class="n">depth2</span><span class="p">);</span>
          <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">depth1</span><span class="o">!=</span><span class="mh">0x80</span> <span class="o">&amp;&amp;</span> <span class="n">depth2</span><span class="o">!=</span><span class="mh">0x80</span><span class="p">);</span>	<span class="c1">//loop until distance command completes</span>

          <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
          
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
          <span class="k">do</span><span class="p">{</span>
              <span class="c1">// displayspeed();</span>
              <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadBuffers</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">depth1</span><span class="p">,</span><span class="n">depth2</span><span class="p">);</span>
          <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">depth1</span><span class="o">!=</span><span class="mh">0x80</span> <span class="o">&amp;&amp;</span> <span class="n">depth2</span><span class="o">!=</span><span class="mh">0x80</span><span class="p">);</span>	<span class="c1">//loop until distance command completes</span>

          <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="c1">// roboclaw.SpeedAccelDistanceM1M2(address, uint32_t accel, uint32_t speed1, uint32_t distance1, uint32_t speed2, uint32_t distance2, uint8_t flag=0);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="o">-</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">accelMultiplier</span><span class="p">,</span><span class="o">-</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">speedMultiplier</span><span class="p">,</span><span class="n">distance</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM1</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">//distance traveled is v*v/2a = 12000*12000/2*12000 = 6000</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedAccelDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">qppsM2</span><span class="o">*</span><span class="n">decelMultiplier</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>  <span class="c1">//that makes the total move in ondirection 48000</span>
      <span class="k">do</span><span class="p">{</span>
          <span class="c1">// displayspeed();</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadBuffers</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="n">depth1</span><span class="p">,</span><span class="n">depth2</span><span class="p">);</span>
      <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">depth1</span><span class="o">!=</span><span class="mh">0x80</span> <span class="o">&amp;&amp;</span> <span class="n">depth2</span><span class="o">!=</span><span class="mh">0x80</span><span class="p">);</span>	<span class="c1">//loop until distance command completes</span>

      <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">displayspeed</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">uint8_t</span> <span class="n">status1</span><span class="p">,</span><span class="n">status2</span><span class="p">,</span><span class="n">status3</span><span class="p">,</span><span class="n">status4</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">valid1</span><span class="p">,</span><span class="n">valid2</span><span class="p">,</span><span class="n">valid3</span><span class="p">,</span><span class="n">valid4</span><span class="p">;</span>
    
    <span class="kt">int32_t</span> <span class="n">enc1</span><span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid1</span><span class="p">);</span>
    <span class="kt">int32_t</span> <span class="n">enc2</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid2</span><span class="p">);</span>
    <span class="kt">int32_t</span> <span class="n">speed1</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadSpeedM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid3</span><span class="p">);</span>
    <span class="kt">int32_t</span> <span class="n">speed2</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadSpeedM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status4</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid4</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Encoder1:"</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">valid1</span><span class="p">){</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">enc1</span><span class="p">,</span><span class="n">DEC</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">status1</span><span class="p">,</span><span class="n">HEX</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"failed "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Encoder2:"</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">valid2</span><span class="p">){</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">enc2</span><span class="p">,</span><span class="n">DEC</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">status2</span><span class="p">,</span><span class="n">HEX</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"failed "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Speed1:"</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">valid3</span><span class="p">){</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">speed1</span><span class="p">,</span><span class="n">DEC</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"failed "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Speed2:"</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">valid4</span><span class="p">){</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">speed2</span><span class="p">,</span><span class="n">DEC</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">" "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span><span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"failed "</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">home</span><span class="p">(</span><span class="kt">uint16_t</span> <span class="n">targetInit</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">const</span> <span class="kt">uint8_t</span> <span class="n">bitDirection</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// Bit 1 - Direction (0 = Forward, 1 = Backwards)</span>
    <span class="kt">bool</span> <span class="n">M1_state</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">M2_state</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">speed</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="kt">uint16_t</span> <span class="n">M1target</span> <span class="o">=</span> <span class="n">qpps</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>
    <span class="kt">uint16_t</span> <span class="n">M2target</span> <span class="o">=</span> <span class="n">qpps</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>

    <span class="kt">uint8_t</span> <span class="n">status1</span><span class="p">,</span><span class="n">status2</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">valid1</span><span class="p">,</span><span class="n">valid2</span><span class="p">;</span>
    <span class="kt">int32_t</span> <span class="n">enc1</span><span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid1</span><span class="p">);</span>
    <span class="kt">int32_t</span> <span class="n">enc2</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">status2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">valid2</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span><span class="n">valid1</span> <span class="o">&amp;&amp;</span> <span class="n">valid2</span><span class="p">){</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="s">"Encoder1: %d</span><span class="se">\t</span><span class="s">Encoder2: %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">enc1</span><span class="p">,</span> <span class="n">enc2</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Error reading encoders"</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">targetInit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">enc1</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">enc1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">M1target</span><span class="p">)</span> <span class="n">M1target</span> <span class="o">=</span> <span class="n">enc1</span><span class="p">;}</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">enc2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span><span class="k">if</span> <span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">enc2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">M2target</span><span class="p">)</span> <span class="n">M2target</span> <span class="o">=</span> <span class="n">enc2</span><span class="p">;}</span>
      <span class="n">M1target</span> <span class="o">+=</span> <span class="n">targetInit</span><span class="p">;</span>
      <span class="n">M2target</span> <span class="o">+=</span> <span class="n">targetInit</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">enc1</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">speed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// Bit 1 - Direction (0 = Forward, 1 = Backwards)</span>
    <span class="k">do</span>
    <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">distance</span><span class="o">++</span><span class="p">;</span>
        <span class="n">M1_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M1_HOME</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M1_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">M1target</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_state</span><span class="p">)</span> 
    <span class="p">{</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SetEncM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="n">M1_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">do</span>
        <span class="p">{</span>
            <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">-</span><span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">distance</span><span class="o">++</span><span class="p">;</span>
            <span class="n">M1_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M1_HOME</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M1_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">M1target</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_state</span><span class="p">)</span>
        <span class="p">{</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SetEncM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="n">M1_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> 
        <span class="p">{</span>
            <span class="k">do</span>
            <span class="p">{</span>
                <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">distance</span><span class="o">--</span><span class="p">;</span>
                <span class="n">M1_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M1_HOME</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M1_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="n">M1target</span><span class="p">);</span>
            <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">M1_fault</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"could not home M1"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">enc2</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">speed</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="n">speed</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// Need to check</span>
    <span class="k">do</span>
    <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">distance</span><span class="o">++</span><span class="p">;</span>
        <span class="n">M2_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M2_HOME</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M2_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">M2target</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M2_state</span><span class="p">)</span> 
    <span class="p">{</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="n">roboclaw</span><span class="p">.</span><span class="n">SetEncM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="n">M2_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">do</span>
        <span class="p">{</span>
            <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">-</span><span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
            <span class="n">distance</span><span class="o">++</span><span class="p">;</span>
            <span class="n">M2_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M2_HOME</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M2_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&lt;</span> <span class="n">M2target</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M2_state</span><span class="p">)</span> 
        <span class="p">{</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="n">roboclaw</span><span class="p">.</span><span class="n">SetEncM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
          <span class="n">M2_fault</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
            <span class="k">do</span>
            <span class="p">{</span>
                <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                <span class="n">distance</span><span class="o">--</span><span class="p">;</span>
                <span class="n">M2_state</span> <span class="o">=</span> <span class="n">digitalRead</span><span class="p">(</span><span class="n">M2_HOME</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">M2_state</span> <span class="o">&amp;&amp;</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="n">M2target</span><span class="p">);</span>
            <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="n">M2_fault</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
            <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"could not home M2"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="n">Preferences</span> <span class="n">preferences</span><span class="p">;</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="s">"roboclaw_defines"</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">putBool</span><span class="p">(</span><span class="s">"M1_fault"</span><span class="p">,</span> <span class="n">M1_fault</span><span class="p">);</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">putBool</span><span class="p">(</span><span class="s">"M2_fault"</span><span class="p">,</span> <span class="n">M2_fault</span><span class="p">);</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>

    <span class="c1">// Code to save log in SPIFFS</span>
    <span class="c1">// if (M1_fault || M2_fault)</span>
    <span class="c1">// {</span>
    <span class="c1">//   File file = (!SPIFFS.exists("/log.txt"))?SPIFFS.open("/log.txt", FILE_WRITE):SPIFFS.open("/log.txt", FILE_APPEND);      </span>

    <span class="c1">//   if(!file){</span>
    <span class="c1">//       Serial.println("There was an error opening the file for writing");</span>
    <span class="c1">//       return;</span>
    <span class="c1">//   }</span>
      
    <span class="c1">//   if(file.printf("enc1: %i, enc1_direction: %s, M1_fault: %s, enc2: %i, enc2_direction: %s, M2_fault: %s\n", enc1, (~bitDirection &amp; status1)?"fwd":"bwd"), M1_fault?"fail":"success", enc2, (~bitDirection &amp; status2)?"fwd":"bwd", M2_fault?"fail":"success") {</span>
    <span class="c1">//       Serial.println("File was written");</span>
    <span class="c1">//   }else {</span>
    <span class="c1">//       Serial.println("File write failed");</span>
    <span class="c1">//   }</span>

    <span class="c1">//   file.close();</span>
    <span class="c1">// }</span>

    <span class="n">roboclaw</span><span class="p">.</span><span class="n">ResetEncoders</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handlePreferences</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="s">"loadorsave"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">"2"</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Preferences</span> <span class="n">preferences</span><span class="p">;</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
    <span class="n">preferences</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
    <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/html"</span><span class="p">,</span><span class="s">"cleared preferences"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleHome</span><span class="p">(){</span>
  <span class="n">String</span> <span class="n">page</span> <span class="o">=</span> <span class="n">home_page</span><span class="p">;</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/html"</span><span class="p">,</span><span class="n">page</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">homeMotors</span><span class="p">(){</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">homing</span> <span class="o">==</span> <span class="nb">false</span><span class="p">){</span>
    <span class="n">homing</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">status</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enableAutoMovement</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">home</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">M1_fault</span><span class="p">)</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"M1 failed "</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">M2_fault</span><span class="p">)</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"M2 failed"</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_fault</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">M2_fault</span><span class="p">)</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"Homed successfully"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="n">status</span> <span class="o">=</span> <span class="s">"Cannot home in Auto Mode!"</span><span class="p">;</span>
    <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/html"</span><span class="p">,</span> <span class="n">status</span><span class="p">);</span>
    <span class="n">homing</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleMovement</span><span class="p">(){</span>
  <span class="n">String</span> <span class="n">status</span> <span class="o">=</span> <span class="s">""</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enableAutoMovement</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">M1_fault</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">M2_fault</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">movement</span><span class="p">();</span>
      <span class="n">status</span> <span class="o">+=</span> <span class="s">"Moved motors"</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="n">status</span> <span class="o">+=</span> <span class="s">"Cannot home "</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">M1_fault</span><span class="p">)</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"M1 "</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">M2_fault</span><span class="p">)</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"M2"</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="n">status</span> <span class="o">+=</span> <span class="s">"Cannot test movement in Auto Mode!"</span><span class="p">;</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/html"</span><span class="p">,</span> <span class="n">status</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleManualOrAuto</span><span class="p">(){</span>
  <span class="n">enableAutoMovement</span> <span class="o">^=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleManualOrAutoState</span><span class="p">(){</span>
  <span class="n">String</span> <span class="n">ManAutoState</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">enableAutoMovement</span><span class="p">)</span> <span class="n">ManAutoState</span> <span class="o">=</span> <span class="s">"Auto"</span><span class="p">;</span>
  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enableAutoMovement</span><span class="p">)</span> <span class="n">ManAutoState</span> <span class="o">=</span> <span class="s">"Manual"</span><span class="p">;</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/html"</span><span class="p">,</span><span class="n">ManAutoState</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleEncoder_1</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">enc_value</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM1</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">enc_value</span><span class="p">);</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleEncoder_2</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">enc_value</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadEncM2</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">enc_value</span><span class="p">);</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
    
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleMotor</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">speed</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
  <span class="n">String</span> <span class="n">motor_channel</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="s">"motorChannel"</span><span class="p">);</span>
  <span class="n">String</span> <span class="n">motor_state</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="s">"motorState"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">enableAutoMovement</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">motor_channel</span> <span class="o">==</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">qpps</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="c1">// roboclaw.ForwardM1(address, 64);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"2"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">-</span><span class="n">speed</span><span class="p">,</span> <span class="n">qpps</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="c1">// roboclaw.ForwardM1(address, 64);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"0"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM1</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">motor_channel</span> <span class="o">==</span> <span class="s">"2"</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">qpps</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="c1">// roboclaw.ForwardM2(address, 64);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"2"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="o">-</span><span class="n">speed</span><span class="p">,</span> <span class="n">qpps</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="c1">// roboclaw.ForwardM2(address, 64);</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">motor_state</span> <span class="o">==</span> <span class="s">"0"</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">roboclaw</span><span class="p">.</span><span class="n">SpeedDistanceM2</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleTemp</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">uint16_t</span> <span class="n">temp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadTemp</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">temp</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">temp_f</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">temp</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
  <span class="n">String</span> <span class="n">temp_str</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">temp_f</span><span class="p">);</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="n">temp_str</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleVoltage</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">voltage</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">voltage</span> <span class="o">=</span> <span class="n">roboclaw</span><span class="p">.</span><span class="n">ReadMainBatteryVoltage</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
  <span class="kt">float</span> <span class="n">voltage_f</span> <span class="o">=</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">voltage</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span>
  <span class="n">String</span> <span class="n">voltage_str</span> <span class="o">=</span> <span class="n">String</span><span class="p">(</span><span class="n">voltage_f</span><span class="p">);</span>
  <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="n">voltage_str</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">handleLogFile</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">String</span> <span class="n">action</span> <span class="o">=</span> <span class="n">server</span><span class="p">.</span><span class="n">arg</span><span class="p">(</span><span class="s">"action"</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">"0"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SPIFFS</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="s">"/log.txt"</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">File</span> <span class="n">download</span> <span class="o">=</span> <span class="n">SPIFFS</span><span class="p">.</span><span class="n">open</span><span class="p">(</span><span class="s">"/log.txt"</span><span class="p">,</span> <span class="n">FILE_READ</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">download</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">server</span><span class="p">.</span><span class="n">sendHeader</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span> <span class="s">"text/text"</span><span class="p">);</span>
        <span class="n">server</span><span class="p">.</span><span class="n">sendHeader</span><span class="p">(</span><span class="s">"Content-Disposition"</span><span class="p">,</span> <span class="s">"attachment; filename=log.txt"</span><span class="p">);</span>
        <span class="n">server</span><span class="p">.</span><span class="n">sendHeader</span><span class="p">(</span><span class="s">"Connection"</span><span class="p">,</span> <span class="s">"close"</span><span class="p">);</span>
        <span class="n">server</span><span class="p">.</span><span class="n">streamFile</span><span class="p">(</span><span class="n">download</span><span class="p">,</span> <span class="s">"application/octet-stream"</span><span class="p">);</span>
        <span class="n">download</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
        <span class="n">server</span><span class="p">.</span><span class="n">client</span><span class="p">().</span><span class="n">stop</span><span class="p">();</span> <span class="c1">// Stop is needed because no content length was sent (?)</span>
      <span class="p">}</span> <span class="k">else</span> <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="s">"/log.txt empty"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="s">"failed to retrieve /log.txt"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">action</span> <span class="o">==</span> <span class="s">"1"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">SPIFFS</span><span class="p">.</span><span class="n">exists</span><span class="p">(</span><span class="s">"/log.txt"</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">SPIFFS</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="s">"/log.txt"</span><span class="p">);</span>
      <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="s">"removed /log.txt"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="n">server</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="s">"text/plain"</span><span class="p">,</span> <span class="s">"did not find /log.txt"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
                                        </code></pre></figure>

                                    
                                </div>
                                <footer>
                                    <p>
                                        
                                            
                                            
                                        
                                    </p>
                                </footer>
                            </div>

                            <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">&times;</a>
                        </section>
                    
                
                
                
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-l video control raspberry-pi" id="portfolio-block-19">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/logo.png');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Raspberry Pi - play video when button pressed</h3>
                    
                    <p>
                        
                        Written for a commercial exhibition, video plays when a user inserts a ‘coin’ to a slot in the enclosure.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://github.com/UriShX/portfolio/blob/master/Raspberry_Pi_play_video_with_GPIO/rPi_play_video_w_GPIO.py" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#stackable-19-1">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                        <section aria-hidden="true" aria-labelledby="stackable-label" class="modal--show" id="stackable-19-1" role="dialog" tabindex="-1">

                            <div class="modal-inner">
                                <header>
                                    <h2 id="stackable-label">Stacked modal</h2>
                                </header>
                                <div class="modal-content">
                                    
                                        
                                        
<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp">                                            <span class="cp">#!/usr/bin/env python3
</span>
<span class="cp"># A short python script to play once a video file when button is pressed
# meant to run on Raspberry Pi, with button connected to GPIO 21
# script meant to be used in a commercial exhibition, and button to be pressed by PMMA "coin"
# inserted to slot in arcade-styled enclosure.
# Sample video from https://peach.blender.org/download/
# Requires omxplayer!!
</span>
<span class="n">import</span> <span class="n">RPi</span><span class="p">.</span><span class="n">GPIO</span> <span class="n">as</span> <span class="n">GPIO</span>
<span class="n">import</span> <span class="n">os</span>
<span class="n">import</span> <span class="n">sys</span>
<span class="n">from</span> <span class="n">omxplayer</span><span class="p">.</span><span class="n">player</span> <span class="n">import</span> <span class="n">OMXPlayer</span>
<span class="n">from</span> <span class="n">pathlib</span> <span class="n">import</span> <span class="n">Path</span>
<span class="n">from</span> <span class="n">time</span> <span class="n">import</span> <span class="n">sleep</span>

<span class="n">GPIO</span><span class="p">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="p">.</span><span class="n">BCM</span><span class="p">)</span>

<span class="cp"># button on GPIO 21
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="n">GPIO</span><span class="p">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">pull_up_down</span><span class="o">=</span><span class="n">GPIO</span><span class="p">.</span><span class="n">PUD_UP</span><span class="p">)</span>
<span class="cp"># indication LED on GPIO 13
</span><span class="n">GPIO</span><span class="p">.</span><span class="n">setup</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">GPIO</span><span class="p">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="cp"># DEBUG button on GPIO 24
#GPIO.setup(24, GPIO.IN, pull_up_down=GPIO.PUD_UP)
</span>    
<span class="n">VIDEO_PATH</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s">"/home/pi/mu_code/videos/SampleVideo_1280x720_10mb.mp4"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="o">:</span>
    <span class="n">VIDEO_PATH</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    
<span class="n">player</span> <span class="o">=</span> <span class="n">OMXPlayer</span><span class="p">(</span><span class="n">VIDEO_PATH</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="err">'</span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">osd</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">keys</span> <span class="o">-</span><span class="n">b</span> <span class="o">-</span><span class="n">o</span> <span class="n">hdmi</span><span class="err">'</span><span class="p">)</span>

<span class="n">def</span> <span class="n">playerExit</span><span class="p">(</span><span class="n">code</span><span class="p">)</span><span class="o">:</span>
    <span class="n">player</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>
    <span class="n">print</span><span class="p">(</span><span class="err">'</span><span class="n">exit</span><span class="err">'</span><span class="p">,</span><span class="n">code</span><span class="p">)</span>
    <span class="n">os</span><span class="p">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">last_state1</span> <span class="o">=</span> <span class="n">True</span>
<span class="n">input_state1</span> <span class="o">=</span> <span class="n">True</span>
<span class="n">quit_video</span> <span class="o">=</span> <span class="n">False</span>
<span class="n">timer</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">playing</span> <span class="o">=</span> <span class="n">False</span>

<span class="cp"># set variable for length of video
</span><span class="n">videoLength</span> <span class="o">=</span> <span class="n">player</span><span class="p">.</span><span class="n">duration</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.1</span>

<span class="cp"># after loading pause at end of video
</span><span class="n">sleep</span><span class="p">(</span><span class="n">videoLength</span><span class="p">)</span>
<span class="n">player</span><span class="p">.</span><span class="n">pause</span><span class="p">()</span>
<span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">while</span> <span class="n">True</span><span class="o">:</span>
    <span class="cp">#Read states of input
</span>    <span class="n">input_state1</span> <span class="o">=</span> <span class="n">GPIO</span><span class="p">.</span><span class="n">input</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>

    <span class="cp">#If GPIO(21) is shorted to Ground
</span>    <span class="k">if</span> <span class="n">input_state1</span> <span class="o">!=</span> <span class="n">last_state1</span><span class="o">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">not</span> <span class="n">playing</span> <span class="n">and</span> <span class="n">not</span> <span class="n">input_state1</span><span class="p">)</span><span class="o">:</span>
            <span class="n">player</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">player</span><span class="p">.</span><span class="n">play</span><span class="p">()</span>
            <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">playing</span> <span class="o">=</span> <span class="n">True</span>
    
    <span class="k">if</span> <span class="n">playing</span><span class="o">:</span>
        <span class="k">if</span> <span class="n">timer</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">videoLength</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">)</span><span class="o">:</span>
            <span class="n">print</span> <span class="p">(</span><span class="s">"Video flie length: %f, Timer: %f"</span> <span class="o">%</span><span class="p">(</span><span class="n">videoLength</span><span class="p">,</span> <span class="n">timer</span><span class="p">))</span>
            <span class="n">timer</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">player</span><span class="p">.</span><span class="n">pause</span><span class="p">()</span>
            <span class="n">GPIO</span><span class="p">.</span><span class="n">output</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">playing</span> <span class="o">=</span> <span class="n">False</span>
        <span class="k">else</span><span class="o">:</span>
            <span class="n">timer</span> <span class="o">+=</span> <span class="n">player</span><span class="p">.</span><span class="n">position</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1000.0</span>
    
    <span class="n">player</span><span class="p">.</span><span class="n">exitEvent</span> <span class="o">+=</span> <span class="n">lambda</span> <span class="n">_</span><span class="p">,</span> <span class="n">exit_code</span><span class="o">:</span> <span class="n">playerExit</span><span class="p">(</span><span class="n">exit_code</span><span class="p">)</span>
    
    <span class="cp">#GPIO(24) to close omxplayer manually - used during debug
</span>    <span class="k">if</span> <span class="n">quit_video</span> <span class="o">==</span> <span class="n">True</span><span class="o">:</span>
<span class="cp">#        pygame.quit()
</span>        <span class="n">player</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="n">os</span><span class="p">.</span><span class="n">system</span><span class="p">(</span><span class="err">'</span><span class="n">killall</span> <span class="n">omxplayer</span><span class="p">.</span><span class="n">bin</span><span class="err">'</span><span class="p">)</span>
        <span class="n">playing</span> <span class="o">=</span> <span class="n">False</span>
        <span class="n">sys</span><span class="p">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">os</span><span class="p">.</span><span class="n">_exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="cp">#Set last_input states
</span>    <span class="n">last_state1</span> <span class="o">=</span> <span class="n">input_state1</span>
                                        </code></pre></figure>

                                    
                                </div>
                                <footer>
                                    <p>
                                        
                                            
                                            
                                        
                                    </p>
                                </footer>
                            </div>

                            <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">&times;</a>
                        </section>
                    
                
                
                
                
            </div>
        
            
            
            
            
            <div class="portfolio-block portfolio-r design prototype" id="portfolio-block-20">
                <div class="portfolio-front" style="background-image: url('/Jekyll-portfolio/assets/img/portfolio/tannerino/Tannerino-design-concept-1024x728.jpg');"></div>
                <div class="portfolio-overlay"></div>
                <div class="portfolio-excerpt">
                    
                        <h3>Tannerino (electro-Theremin)</h3>
                    
                    <p>
                        
                        A continuous variable frequency MIDI controller based on an Arduino Uno.

                    </p>
                </div>
                <div class="portflio-links">
                    
                        <a href="https://hackaday.io/project/133879-tannerino" target="_blank" rel="noopener noreferrer">
                            <i class="material-icons">link</i>
                        </a>
                    
                    
                        
                            <a href="#modal-gallery-20">
                                <i class="material-icons">pageview</i>
                            </a>
                        
                    
                </div>


                

                
                    
                
                
                
                
                    <section aria-hidden="true" aria-labelledby="modal-label" class="portfolio-modal modal--gallery" data-cssmodal-resize="true" id="modal-gallery-20" role="dialog" tabindex="-1">
                        <div class="modal-inner">
                            <div class="modal-content">
                                <div class="spinner">
                                    <div class="spinner__outer"></div>
                                    <div class="spinner__inner"></div>
                                </div>


                                <div aria-atomic="false" aria-live="polite" class="modal-detail"></div>

                                <ul class="modal--gallery-navigation">
                                    <li>
                                        <a class="modal--gallery-navigation-prev" href="#" title="Previous">Previous</a>
                                    </li>
                                    <li>
                                        <a class="modal--gallery-navigation-next" href="#" title="Next">Next</a>
                                    </li>
                                </ul>

                            </div>
                            <div class="modal--gallery-caption"></div>

                            <footer>
                                <ul aria-hidden="true" class="modal-content-list is-active">
                                    
                                        
                                            <li data-caption="">
                                                
                                                    <a href="#modal-gallery-20/1">
                                                        <img alt="" data-src-fullsize="/Jekyll-portfolio/assets/img/portfolio/tannerino/Tannerino-design-concept-1024x728.jpg">
                                                    </a>
                                                
                                            </li>
                                        
                                    
                                    
                                </ul>
                            </footer>
                        </div>

                        <a class="modal-close js-modal-close" data-close="Close" data-dismiss="modal" href="#!" title="Close this modal">?</a>
                    </section>
                
            </div>
        
    </div>

</div>

<script>
    /***
     * Truncate excerpt paragraph if too long for current width, and trim white spaces.
     */
    (function() {
        var blocks = document.querySelectorAll('.portfolio-excerpt');

        for (var block of blocks) {
            var pHeight = block.offsetHeight - block.querySelector('h3').offsetHeight;
            var paragraph = block.querySelector('p');
            var pText = paragraph.textContent;
            pText = pText.trim();
            var pFontSize = window.getComputedStyle(paragraph, null).getPropertyValue('font-size');
            pFontSize = parseInt(pFontSize.split('px')[0], 10);

            var n = parseInt(paragraph.offsetWidth / pFontSize) * parseInt(pHeight / pFontSize);

            paragraph.innerHTML = (pText.length > n) ? pText.substr(0, n-1) + '&hellip;' : pText;            
        }
        
    })();
</script>

<script src="/Jekyll-portfolio/assets/script/portfolio-tag-filter.js"></script>
<script src="/Jekyll-portfolio/assets/script/modal.js"></script>
<script src="/Jekyll-portfolio/assets/script/modal-gallery.js"></script>
<script src="/Jekyll-portfolio/assets/script/modal-helper.js"></script>
<script src="/Jekyll-portfolio/assets/script/modal-maxwidth.js"></script>
<script src="/Jekyll-portfolio/assets/script/modal-resize.js"></script>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/Jekyll-portfolio/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/Jekyll-portfolio/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/Jekyll-portfolio/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">&#169; Uri Shani 2020</li>
          <li><a class="u-email" href="mailto:urish@urishx.com">urish@urishx.com</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>A portfolio centered site with a blog, to feature my adventures and projects in  making, programming, and engineering. Built in Jekyll, to be served from Github pages.
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://hackaday.io/UriSh" title="UriSh"><svg class="svg-icon grey"><use xlink:href="/Jekyll-portfolio/assets/minima-social-icons.svg#hackaday"></use></svg></a></li><li><a rel="me" href="https://www.facebook.com/uri.sh.982" title="uri.sh.982"><svg class="svg-icon grey"><use xlink:href="/Jekyll-portfolio/assets/minima-social-icons.svg#facebook"></use></svg></a></li><li><a rel="me" href="https://github.com/UriShX" title="UriShX"><svg class="svg-icon grey"><use xlink:href="/Jekyll-portfolio/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/UriShX" title="UriShX"><svg class="svg-icon grey"><use xlink:href="/Jekyll-portfolio/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
